[role="xpack"]
[[xpack-security-authorization]]

=== Granting access to {osd}
The Elastic Stack comes with the `opensearch_dashboards_admin` {ref}/built-in-roles.html[built-in role], which you can use to grant access to all {osd} features in all spaces. To grant users access to a subset of spaces or features, you can create a custom role that grants the desired {osd} privileges.

When you assign a user multiple roles, the user receives a union of the roles’ privileges. Therefore, assigning the `opensearch_dashboards_admin` role in addition to a custom role that grants {osd} privileges is ineffective because `opensearch_dashboards_admin` has access to all the features in all spaces.

NOTE: When running multiple tenants of OpenSearchDashboards by changing the `opensearch-dashboards.index` in your `opensearch_dashboards.yml`,
you cannot use `opensearch_dashboards_admin` to grant access. You must create custom roles that authorize the user for that specific tenant. Although multi-tenant installations are supported, the recommended approach to securing access to OpenSearchDashboards segments is to grant users access to specific spaces.

[role="xpack"]
[[opensearch-dashboards-role-management]]
=== {osd} role management

To create a role that grants {osd} privileges, open the menu, then click *Stack Management > Roles* and click **Create role**.

[float]
==== Required permissions

The `manage_security` cluster privilege is required to access role management.

[[adding_opensearch_dashboards_privileges]]
==== Adding {osd} privileges

To assign {osd} privileges to the role, click **Add {osd} privilege** in the {osd} section.

[role="screenshot"]
image::user/security/images/add-space-privileges.png[Add {osd} privileges]

Open the **Spaces** selection control to specify whether to grant the role access to all spaces *** Global (all spaces)** or one or more individual spaces. If you select *** Global (all spaces)**, you can’t select individual spaces until you clear your selection.

Use the **Privilege** menu to grant access to features. The default is **Custom**, which you can use to grant access to individual features. Otherwise, you can grant read and write access to all current and future features by selecting **All**, or grant read access to all current and future features by selecting **Read**.

When using the **Customize by feature** option, you can choose either **All**, **Read** or **None** for access to each feature. As new features are added to {osd}, roles that use the custom option do not automatically get access to the new features. You must manually update the roles.

NOTE: *{stack-monitor-app}* relies on built-in roles to grant access. When a
user is assigned the appropriate roles, the *{stack-monitor-app}* application is
available; otherwise, it is not visible.

To apply your changes, click **Add {osd} privilege**. The privilege shows up under the {osd} privileges section of the role.


[role="screenshot"]
image::user/security/images/create-space-privilege.png[Add {osd} privilege]

==== Feature availability

Features are available to users when their roles grant access to the features, **and** those features are visible in their current space. The following matrix explains when features are available to users when controlling access via <<spaces-managing, spaces>> and role-based access control:

|===
|**Spaces config** |**Role config** |**Result**

|Feature hidden
|Feature disabled
|Feature not available

|Feature hidden
|Feature enabled
|Feature not available

|Feature visible
|Feature disabled
|Feature not available

|Feature visible
|Feature enabled
|**Feature available**
|===

==== Assigning different privileges to different spaces

Using the same role, it’s possible to assign different privileges to different spaces. After you’ve added privileges, click **Add {osd} privilege**. If you’ve already added privileges for either *** Global (all spaces)** or an individual space, you will not be able to select these in the **Spaces** selection control.

Additionally, if you’ve already assigned privileges at *** Global (all spaces)**, you are only able to assign additional privileges to individual spaces. Similar to the behavior of multiple roles granting the union of all privileges, {osd} privileges are also a union. If you’ve already granted the user the **All** privilege at *** Global (all spaces)**, you’re not able to restrict the role to only the **Read** privilege at an individual space.


==== Privilege summary

To view a summary of the privileges granted, click **View privilege summary**.

[role="screenshot"]
image::user/security/images/view-privilege-summary.png[View privilege summary]

==== Example 1: Grant all access to Dashboard at an individual space

. Click **Add {osd} privilege**.
. For **Spaces**, select an individual space.
. For **Privilege**, leave the default selection of **Custom**.
. For the Dashboard feature, select **All**
. Click **Add {osd} privilege**.

[role="screenshot"]
image::user/security/images/privilege-example-1.png[Privilege example 1]

==== Example 2: Grant all access to one space and read access to another

. Click **Add {osd} privilege**.
. For **Spaces**, select the first space.
. For **Privilege**, select **All**.
. Click **Add {osd} privilege**.
. For **Spaces**, select the second space.
. For **Privilege**, select **Read**.
. Click **Add {osd} privilege**.

[role="screenshot"]
image::user/security/images/privilege-example-2.png[Privilege example 2]

==== Example 3: Grant read access to all spaces and write access to an individual space

. Click **Add {osd} privilege**.
. For **Spaces**, select *** Global (all spaces)**.
. For **Privilege**, select **Read**.
. Click **Add {osd} privilege**.
. For **Spaces**, select the individual space.
. For **Privilege**, select **All**.
. Click **Add {osd} privilege**.

[role="screenshot"]
image::user/security/images/privilege-example-3.png[Privilege example 3]
