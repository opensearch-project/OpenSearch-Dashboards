/**
 * Celestial project styles
 */
@import "tailwindcss" prefix(osd);

@theme {
  /* Converting sizing to pixel instead of rem to keep size of nodes consistent no matter the font size*/
  --rem: 16px;
  --spacing: calc(var(--rem) * 0.25);

  --breakpoint-sm: calc(var(--rem) * 40);
  --breakpoint-md: calc(var(--rem) * 48);
  --breakpoint-lg: calc(var(--rem) * 64);
  --breakpoint-xl: calc(var(--rem) * 80);
  --breakpoint-2xl: calc(var(--rem) * 96);

  --container-3xs: calc(var(--rem) * 16);
  --container-2xs: calc(var(--rem) * 18);
  --container-xs: calc(var(--rem) * 20);
  --container-sm: calc(var(--rem) * 24);
  --container-md: calc(var(--rem) * 28);
  --container-lg: calc(var(--rem) * 32);
  --container-xl: calc(var(--rem) * 36);
  --container-2xl: calc(var(--rem) * 42);
  --container-3xl: calc(var(--rem) * 48);
  --container-4xl: calc(var(--rem) * 56);
  --container-5xl: calc(var(--rem) * 64);
  --container-6xl: calc(var(--rem) * 72);
  --container-7xl: calc(var(--rem) * 80);

  --text-xs: calc(var(--rem) * 0.75);
  --text-xs--line-height: calc(calc(var(--rem) * 1) / calc(var(--rem) * 0.75));
  --text-sm: calc(var(--rem) * 0.875);
  --text-sm--line-height: calc(calc(var(--rem) * 1.25) / calc(var(--rem) * 0.875));
  --text-base: calc(var(--rem) * 1);
  --text-base--line-height: calc(calc(var(--rem) * 1.5) / calc(var(--rem) * 1));
  --text-lg: calc(var(--rem) * 1.125);
  --text-lg--line-height: calc(calc(var(--rem) * 1.75) / calc(var(--rem) * 1.125));
  --text-xl: calc(var(--rem) * 1.25);
  --text-xl--line-height: calc(calc(var(--rem) * 1.75) / calc(var(--rem) * 1.25));
  --text-2xl: calc(var(--rem) * 1.5);
  --text-2xl--line-height: calc(calc(var(--rem) * 2) / calc(var(--rem) * 1.5));
  --text-3xl: calc(var(--rem) * 1.875);
  --text-3xl--line-height: calc(calc(var(--rem) * 2.25) / calc(var(--rem) * 1.875));
  --text-4xl: calc(var(--rem) * 2.25);
  --text-4xl--line-height: calc(calc(var(--rem) * 2.5) / calc(var(--rem) * 2.25));
  --text-5xl: calc(var(--rem) * 3);
  --text-5xl--line-height: calc(var(--rem) * 1);
  --text-6xl: calc(var(--rem) * 3.75);
  --text-6xl--line-height: calc(var(--rem) * 1);
  --text-7xl: calc(var(--rem) * 4.5);
  --text-7xl--line-height: calc(var(--rem) * 1);
  --text-8xl: calc(var(--rem) * 6);
  --text-8xl--line-height: calc(var(--rem) * 1);
  --text-9xl: calc(var(--rem) * 8);
  --text-9xl--line-height: calc(var(--rem) * 1);

  --radius-xs: calc(var(--rem) * 0.125);
  --radius-sm: calc(var(--rem) * 0.25);
  --radius-md: calc(var(--rem) * 0.375);
  --radius-lg: calc(var(--rem) * 0.5);
  --radius-xl: calc(var(--rem) * 0.75);
  --radius-2xl: calc(var(--rem) * 1);
  --radius-3xl: calc(var(--rem) * 1.5);
  --radius-4xl: calc(var(--rem) * 2);


  /** Celestial colors */
  --color-cl-red-100: #FFF5F5;
  --color-cl-red-300: #EA7158;
  --color-cl-red-500: #D13313;

  --color-cl-blue-100: #D1F1FF;
  --color-cl-blue-300: #75CFFF;
  --color-cl-blue-400: #42B4FF;
  --color-cl-blue-450: #7AA4F0;
  --color-cl-blue-500: #006CE0;
  --color-cl-blue-900: #002b66;
  /*Polaris: $color-text-button-normal-hover*/

  --color-cl-squid-black: #151D26;

  --color-cl-amber-400: #FF9900;
  --color-cl-purple-500: #D476FD;

  --color-cl-gray-50: #EBEBF0;
  --color-cl-gray-250: #EAEDED;
  --color-cl-gray-350: #C6C6CD;
  --color-cl-gray-400: #B4B4BB;
  --color-cl-gary-500: #7D8998;
  --color-cl-gray-600: #687078;
  --color-cl-gray-650: #424650;
  --color-cl-gray-700: #545B64;
  --color-cl-gray-750: #232b37;
  --color-cl-gray-950: #0F141A;

  --color-container-default: light-dark(var(--osd-color-white),
      var(--osd-color-cl-squid-black));

  --color-container-breached: light-dark(var(--osd-color-cl-red-100),
      var(--osd-color-cl-squid-black));

  /* Border default and breached colors */
  --color-status-default: light-dark(var(--osd-color-cl-gary-500),
      var(--osd-color-cl-gray-250));

  --color-status-breached: var(--osd-color-cl-red-500);

  /* Hover colors for border */
  --color-status-default-hover: var(--osd-color-cl-gray-400);
  --color-status-breached-hover: var(--osd-color-cl-red-300);
  --color-divider-default: light-dark(var(--osd-color-cl-gray-350),
      var(--osd-color-cl-gray-650));

  /* Text color for service title, subtitle and group title */
  --color-body-default: light-dark(var(--osd-color-cl-gray-950),
      var(--osd-color-cl-gray-350));

  --color-body-secondary: light-dark(var(--osd-color-cl-gray-650),
      var(--osd-color-cl-gray-350));

  --color-interactive: light-dark(var(--osd-color-cl-blue-500),
      var(--osd-color-cl-blue-400),
    );

  /* Link color and hover */
  --color-link-default: light-dark(var(--osd-color-cl-blue-500),
      var(--osd-color-cl-blue-400));

  --color-link-hover: light-dark(var(--osd-color-cl-blue-900),
      var(--osd-color-cl-blue-300));

  /* Button hover - Currently only info button on the tile */
  --color-button-hover: var(--osd-color-cl-blue-100);

  /* Donut color for faults, errors, throttles, requests and icon*/
  --color-ok: var(--osd-color-cl-blue-450);
  --color-faults: var(--osd-color-cl-red-500);
  --color-errors: var(--osd-color-cl-amber-400);
  --color-throttles: var(--osd-color-cl-purple-500);
  --color-requests: light-dark(var(--osd-color-cl-gray-700),
      var(--osd-color-white));

  --color-icon: light-dark(var(--osd-color-cl-gray-600),
      var(--osd-color-cl-gray-350));

  /* Loader color */
  --color-spinner: var(--osd-color-cl-gary-500);

  --color-map-dots: light-dark(var(--osd-color-cl-gray-50),
      var(--osd-color-cl-gray-750));

  /* Node type colors â€” aligned with EUI theme tokens */
  --color-type-service: var(--ouiColorPrimary, var(--osd-color-cl-blue-500));
  --color-type-agent: var(--ouiColorVis1, #54B399);
  --color-type-llm: var(--ouiColorVis2, #DD0A73);
  --color-type-tool: var(--ouiColorVis0, #E7664C);
  --color-type-content: var(--ouiColorVis4, #D6BF57);
  --color-type-retrieval: var(--ouiColorVis6, #B9A888);
  --color-type-embeddings: var(--ouiColorVis3, #6092C0);
  --color-type-other: var(--ouiColorMediumShade, #98A2B3);

  /* Universal status colors */
  --color-status-ok: #22C55E;
  --color-status-warning: #EAB308;
  --color-status-error: #EF4444;
  --color-status-critical: #DC2626;
  --color-status-unknown: #6B7280;
}

@layer theme {
  /* Dark mode is handled automatically by light-dark() in @theme variables above.
     OSD sets :root { color-scheme: dark|light } and the topology map inherits it,
     so light-dark() resolves to the correct mode without explicit overrides. */

  :root:has(#opensearch-dashboards-body) {
    --osd-color-cl-blue-500: #0268BC;
    --osd-color-blue-500: #0268BC;
    --osd-color-cl-red-500: #C61E25;
    --osd-color-cl-amber-400: #EAAE01;
  }
}

@utility shadow-node-hover {
  box-shadow: 0 0 20px 4px var(--osd-node-glow-color, rgba(59, 130, 246, 0.4));
}

@utility shadow-node-selected {
  box-shadow: 0 0 24px 6px var(--osd-node-glow-color, rgba(59, 130, 246, 0.6)),
              0 0 0 2px var(--osd-node-glow-color, rgba(59, 130, 246, 0.6));
}

.react-flow {
  background-color: var(--osd-color-container-default);
}

/* 
 * XYFlow Handle Transparency
 * Makes connection handles invisible while maintaining functionality
 * To revert: remove this entire block
 */
.react-flow__handle {
  opacity: 0 !important;
  background-color: transparent !important;
  border-color: transparent !important;
}

.react-flow__attribution {
  background-color: transparent;
}