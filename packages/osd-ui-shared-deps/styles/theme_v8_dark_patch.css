/*
 * Copyright OpenSearch Contributors
 * SPDX-License-Identifier: Apache-2.0
 */

/*
 * Patch for the v8dark (eui-next) pre-built CSS bundle.
 *
 * The pre-built bundle (@elastic/eui/dist/eui_theme_next_dark.css) is compiled
 * with eui-next's native primary color (teal, ~#07827E). Our AWS color overrides
 * live in _globals_v8dark.scss and affect plugin SCSS files, but have no effect
 * on the pre-built bundle.
 *
 * This file is appended to the v8dark webpack entry so its rules come after the
 * pre-built bundle in the cascade and win.
 *
 * Shared rules (font family, focus ring keyframes, and common component states
 * that are identical between light and dark) live in theme_v8_shared_patch.css,
 * which is loaded before this file in the webpack entry.
 *
 * AWS v8dark palette (_globals_v8dark.scss):
 *   $ouiColorPrimary:        #006ce0  (AWS Blue — interactive)
 *   $ouiColorSecondary:      #00827d  (AWS Teal)
 *   $ouiColorAccent:         #ff9900  (AWS Orange)
 *   $ouiColorWarning:        #8d6605
 *   $ouiColorDanger:         #d91515
 *
 * Dark-mode derived values used in this patch:
 *   Primary (dark-bg readable):   #4da6ff  (AWS Blue — lightened for dark bg)
 *   Primary hover (lighten ~10%): #70baff
 *   Primary active (darken ~8%):  #3d9aee
 *   Primary subtle tint (focus):  rgba(77, 166, 255, 0.15)
 *   Focus ring rgba:              rgba(77, 166, 255, 0.3)
 *   Shadow base rgba:             rgba(0, 0, 0, 0.4)
 *   Page background:              #0d1926
 *   Light shade:                  #1f2d40
 *   Lightest shade:               #131c27
 *   Empty shade (darkest):        #0a1018
 */

/* ==========================================================================
   DESIGN TOKENS
   Theme-specific custom properties. Shared tokens (font family) are in
   theme_v8_shared_patch.css.
   ========================================================================== */

:root {
  /* AWS primary color scale */
  --color-primary:            #006ce0;  /* fill backgrounds (same as light) */
  --color-primary-on-dark:    #4da6ff;  /* text/border on dark backgrounds */
  --color-primary-hover:      #005bbf;  /* fill button hover */
  --color-primary-hover-dark: #70baff;  /* link hover on dark backgrounds */

  /* AWS dark-mode page palette */
  --color-empty-shade:   #0a1018;
  --color-lightest-shade: #131c27;
  --color-light-shade:   #1f2d40;
  --color-page-bg:       #0d1926;
  --color-text:          #c9cfd6;
  --color-white:         #ffffff;
  --color-focus-bg:      #003a7a;

  /* Focus ring */
  --focus-ring:             rgba(77, 166, 255, 0.3);
  --focus-ring-transparent: rgba(77, 166, 255, 0);
  --primary-alpha-10:       rgba(77, 166, 255, 0.1);
  --primary-alpha-15:       rgba(77, 166, 255, 0.15);

  /* Box shadows */
  --shadow-base:       rgba(0, 0, 0, 0.4);
  --shadow-base-light: rgba(0, 0, 0, 0.25);
  --shadow-field:      rgba(0, 0, 0, 0.3);
  --shadow-inset:      rgba(255, 255, 255, 0.1);
}

/* ==========================================================================
   LINKS & ANCHORS
   ========================================================================== */

a {
  color: var(--color-primary-on-dark);
}

.euiLink.euiLink--primary {
  color: var(--color-primary-on-dark);
}
.euiLink.euiLink--primary:hover,
.euiLink.euiLink--primary:focus {
  color: var(--color-primary-hover-dark);
}
.euiLink.euiLink--primary:focus,
.euiLink:focus {
  background: var(--primary-alpha-15);
}

/* ==========================================================================
   BUTTON — filled and outlined primary variants
   ========================================================================== */

/* Spinner color (used when button is disabled but still loading) */
.euiButton.euiButton-isDisabled .euiButtonContent__spinner,
.euiButtonEmpty:disabled .euiButtonContent__spinner,
.euiButtonIcon.euiButtonIcon-isDisabled .euiButtonContent__spinner,
.euiButtonGroupButton.euiButtonGroupButton-isDisabled .euiButtonContent__spinner {
  border-color: var(--color-primary-on-dark) currentColor currentColor currentColor;
}

/* Outlined (default) primary button */
.euiButton--primary {
  color: var(--color-primary-on-dark);
  border-color: var(--color-primary-on-dark);
}
.euiButton--primary.euiButton--fill {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
}
.euiButton--primary.euiButton--fill:not([class*=isDisabled]):active {
  box-shadow: inset 1px 2px 8px var(--shadow-base);
}

/* ==========================================================================
   BUTTON EMPTY — ghost/text-style primary buttons
   ========================================================================== */

.euiButtonEmpty--primary {
  color: var(--color-primary-on-dark);
}

/* ==========================================================================
   BUTTON ICON — icon-only primary buttons
   ========================================================================== */

.euiButtonIcon--primary {
  color: var(--color-primary-on-dark);
  border-color: var(--color-primary-on-dark);
}

/* ==========================================================================
   BUTTON GROUP — segmented primary buttons
   ========================================================================== */

.euiButtonGroupButton--primary {
  color: var(--color-primary-on-dark);
  border-color: var(--color-primary-on-dark);
}
.euiButtonGroupButton--primary.euiButtonGroupButton--fill,
.euiButtonGroupButton--primary.euiButtonGroupButton-isSelected {
  background-color: var(--color-primary);
  border-color: var(--color-primary);
  color: var(--color-white);
}

/* ==========================================================================
   HEADER
   ========================================================================== */

/* Dark-mode header: background uses AWS Blue, border uses dark shade */
.euiHeader {
  background: var(--color-primary);
  border-bottom: 1px solid var(--color-light-shade);
  box-shadow: 0 2px 2px -1px var(--shadow-base), 0 1px 5px -2px var(--shadow-base);
}

/* Logo focus state */
.euiHeaderLogo:focus {
  background: var(--color-focus-bg);
}

/* Active link uses lightened AWS Blue for visibility on dark/teal header */
.euiHeaderLink-isActive {
  color: var(--color-primary-on-dark);
}
.euiHeaderLogo:focus,
.euiHeaderLink:focus,
.euiHeaderSectionItemButton:focus {
  background: var(--color-focus-bg);
}

.euiHeader--default {
  background-color: var(--color-lightest-shade);
}

/* ==========================================================================
   SIDEBAR / COLLAPSIBLE NAV
   ========================================================================== */

.euiCollapsibleNav.euiFlyout,
.euiCollapsibleNavGroup {
  background-color: var(--color-lightest-shade);
}

/* Selected nav item uses lightened AWS Blue */
.euiSideNavItemButton.euiSideNavItemButton-isSelected {
  color: var(--color-primary-on-dark);
}

/* ==========================================================================
   CARD
   ========================================================================== */

/* Selected state border uses lightened AWS Blue */
.euiCard--isSelectable--primary.euiCard-isSelected:not(.euiCard-isDisabled) {
  border-color: var(--color-primary-on-dark) !important;
}

/* Card select button highlight */
.euiCardSelect--primary:enabled {
  background-color: var(--primary-alpha-15);
}

/* Checkable card selected border */
.euiCheckableCard:not(.euiCheckableCard-isDisabled).euiCheckableCard-isChecked {
  border-color: var(--color-primary-on-dark);
}

/* ==========================================================================
   FORM INPUTS
   ========================================================================== */

/* Field text: match v8dark background and text */
.euiFieldText {
  background-color: var(--color-lightest-shade);
  color: var(--color-text);
  box-shadow:
    0 1px 1px -1px var(--shadow-field),
    0 3px 2px -2px var(--shadow-field),
    inset 0 0 0 1px var(--shadow-inset);
}
/* Focus underline switches from teal to AWS Blue */
.euiFieldText:focus {
  background-color: var(--color-empty-shade);
  background-image: linear-gradient(to top, var(--color-primary-on-dark), var(--color-primary-on-dark) 2px, transparent 2px, transparent 100%);
  box-shadow:
    0 1px 1px -1px var(--shadow-field),
    0 4px 4px -2px var(--shadow-field),
    inset 0 0 0 1px var(--shadow-inset);
}

/* FormControlLayout group (input with appended button) */
.euiFormControlLayout--group {
  background-color: var(--color-lightest-shade);
  box-shadow:
    0 1px 1px -1px var(--shadow-field),
    0 3px 2px -2px var(--shadow-field),
    inset 0 0 0 1px var(--shadow-inset);
}

/* Focused label */
.euiFormLabel.euiFormLabel-isFocused {
  color: var(--color-primary-on-dark);
}

/* ComboBox open focus underline */
.euiComboBox.euiComboBox-isOpen .euiComboBox__inputWrap {
  background-image: linear-gradient(to top, var(--color-primary-on-dark), var(--color-primary-on-dark) 2px, transparent 2px, transparent 100%);
}

/* ComboBox focused option highlight */
.euiComboBoxOption.euiComboBoxOption-isFocused {
  color: var(--color-primary-on-dark);
  background-color: var(--primary-alpha-15);
}

/* Select field (euiSelect) focus underline */
.euiSelect:focus {
  background-image: linear-gradient(to top, var(--color-primary-on-dark), var(--color-primary-on-dark) 2px, transparent 2px, transparent 100%);
}

/* Color picker hue slider focus */
.euiHue__range:focus::-webkit-slider-thumb {
  box-shadow: 0 0 0 3px var(--focus-ring);
  border-color: var(--color-primary-on-dark);
}
.euiHue__range:focus::-moz-range-thumb {
  box-shadow: 0 0 0 3px var(--focus-ring);
  border-color: var(--color-primary-on-dark);
}

/* ==========================================================================
   CALLOUT (informational banners — primary variant)
   ========================================================================== */

.euiCallOut--primary {
  border-color: var(--color-primary-on-dark);
  background-color: var(--primary-alpha-10);
}
.euiCallOut--primary .euiCallOutHeader__icon {
  fill: var(--color-primary-on-dark);
}
.euiCallOut--primary .euiCallOutHeader__title {
  color: var(--color-primary-on-dark);
}

/* ==========================================================================
   ACCORDION — icon/button focus
   ========================================================================== */

.euiAccordion__button:focus .euiAccordion__iconWrapper {
  color: var(--color-primary-on-dark);
}
.euiAccordion__iconButton:focus {
  color: var(--color-primary-on-dark);
}

/* ==========================================================================
   CONTEXT MENU — focused item
   ========================================================================== */

.euiContextMenuItem:focus {
  background-color: var(--primary-alpha-15);
}

/* ==========================================================================
   CONTROL BAR — active tab indicator
   ========================================================================== */

.euiControlBar__tab.euiControlBar__tab--active {
  box-shadow: inset 0 4px 0 var(--color-primary-on-dark);
  color: var(--color-primary-on-dark);
}

/* ==========================================================================
   CODE EDITOR — keyboard hint focus
   ========================================================================== */

.euiCodeEditorKeyboardHint:focus {
  border: 2px solid var(--color-primary-on-dark);
}


/* MISCELLANEOUS */

.euiSuperDatePicker__prettyFormatLink {
  color: var(--color-primary-on-dark);
}
