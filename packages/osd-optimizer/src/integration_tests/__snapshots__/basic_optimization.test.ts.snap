// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`builds expected bundles, saves bundle counts to metadata: OptimizerConfig 1`] = `
OptimizerConfig {
  "bundles": Array [
    Bundle {
      "banner": undefined,
      "cache": BundleCache {
        "path": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/target/public/.osd-optimizer-cache,
        "state": undefined,
      },
      "contextDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar,
      "id": "bar",
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/opensearch_dashboards.json,
      "outputDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/target/public,
      "publicDirNames": Array [
        "public",
      ],
      "sourceRoot": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo,
      "type": "plugin",
    },
    Bundle {
      "banner": undefined,
      "cache": BundleCache {
        "path": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/target/public/.osd-optimizer-cache,
        "state": undefined,
      },
      "contextDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo,
      "id": "foo",
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/opensearch_dashboards.json,
      "outputDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/target/public,
      "publicDirNames": Array [
        "public",
      ],
      "sourceRoot": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo,
      "type": "plugin",
    },
  ],
  "cache": true,
  "dist": false,
  "inspectWorkers": false,
  "limits": "<Limits>",
  "maxWorkerCount": 1,
  "plugins": Array [
    Object {
      "directory": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar,
      "extraPublicDirs": Array [],
      "id": "bar",
      "isUiPlugin": true,
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/opensearch_dashboards.json,
    },
    Object {
      "directory": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo,
      "extraPublicDirs": Array [],
      "id": "foo",
      "isUiPlugin": true,
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/opensearch_dashboards.json,
    },
    Object {
      "directory": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/nested/baz,
      "extraPublicDirs": Array [],
      "id": "baz",
      "isUiPlugin": false,
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/nested/baz/opensearch_dashboards.json,
    },
  ],
  "profileWebpack": false,
  "repoRoot": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo,
  "themeTags": Array [
    "v7dark",
    "v7light",
    "v8dark",
    "v8light",
    "v9dark",
    "v9light",
  ],
  "watch": false,
}
`;

exports[`prepares assets for distribution: bar bundle 1`] = `"(()=>{var e={92:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},806:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:10}\\\\n\\",\\"\\"]);let i=o},26:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},524:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:11}\\\\n\\",\\"\\"]);let i=o},167:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},309:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:12}\\\\n\\",\\"\\"]);let i=o},483:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},913:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:13}\\\\n\\",\\"\\"]);let i=o},274:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},816:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:14}\\\\n\\",\\"\\"]);let i=o},52:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},426:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{default:()=>i});var r=n(445),o=n.n(r)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:15}\\\\n\\",\\"\\"]);let i=o},445:function(e){\\"use strict\\";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=e(t);return t[2]?\\"@media \\".concat(t[2],\\" {\\").concat(n,\\"}\\"):n}).join(\\"\\")},t.i=function(e,n,r){\\"string\\"==typeof e&&(e=[[null,e,\\"\\"]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);r&&o[s[0]]||(n&&(s[2]?s[2]=\\"\\".concat(n,\\" and \\").concat(s[2]):s[2]=n),t.push(s))}},t}},904:function(e,t,n){var r=n(85),o=n(92);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},346:function(e,t,n){var r=n(85),o=n(806);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},782:function(e,t,n){var r=n(85),o=n(26);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},256:function(e,t,n){var r=n(85),o=n(524);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},347:function(e,t,n){var r=n(85),o=n(167);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},265:function(e,t,n){var r=n(85),o=n(309);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},431:function(e,t,n){var r=n(85),o=n(483);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},517:function(e,t,n){var r=n(85),o=n(913);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},974:function(e,t,n){var r=n(85),o=n(274);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},332:function(e,t,n){var r=n(85),o=n(816);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},992:function(e,t,n){var r=n(85),o=n(52);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},894:function(e,t,n){var r=n(85),o=n(426);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,r(o,i),e.exports=o.locals||{}},85:function(e,t,n){\\"use strict\\";var r,o,i,a=(o={},function(e){if(void 0===o[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}o[e]=t}return o[e]}),u=[];function s(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],c=n[a]||0,l=\\"\\".concat(a,\\" \\").concat(c);n[a]=c+1;var g=s(l),b={css:i[1],media:i[2],sourceMap:i[3]};-1!==g?(u[g].references++,u[g].updater(b)):u.push({identifier:l,updater:function(e,t){if(t.singleton){var n,r,o,i=h++;r=f.bind(null,n=v||(v=d(t)),i,!1),o=f.bind(null,n,i,!0)}else r=p.bind(null,n=d(t),t),o=function(){var e;null===(e=n).parentNode||e.parentNode.removeChild(e)};return r(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap)&&r(e=t):o()}}(b,t),references:1}),r.push(l)}return r}function d(e){var t=document.createElement(\\"style\\"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach(function(e){t.setAttribute(e,r[e])}),\\"function\\"==typeof e.insert)e.insert(t);else{var i=a(e.insert||\\"head\\");if(!i)throw Error(\\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\\");i.appendChild(t)}return t}var l=(i=[],function(e,t){return i[e]=t,i.filter(Boolean).join(\\"\\\\n\\")});function f(e,t,n,r){var o=n?\\"\\":r.media?\\"@media \\".concat(r.media,\\" {\\").concat(r.css,\\"}\\"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute(\\"media\\",o):e.removeAttribute(\\"media\\"),i&&\\"undefined\\"!=typeof btoa&&(r+=\\"\\\\n/*# sourceMappingURL=data:application/json;base64,\\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i)))),\\" */\\")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var v=null,h=0;e.exports=function(e,t){(t=t||{}).singleton||\\"boolean\\"==typeof t.singleton||(t.singleton=(void 0===r&&(r=!!(window&&document&&document.all&&!window.atob)),r));var n=c(e=e||[],t);return function(e){if(e=e||[],\\"[object Array]\\"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=s(n[r]);u[o].references--}for(var i=c(e,t),a=0;a<n.length;a++){var d=s(n[a]);0===u[d].references&&(u[d].updater(),u.splice(d,1))}n=i}}}},21:function(e,t,n){n.p=window.__osdPublicPath__.bar,n.nc=window.__webpack_nonce__||\\"\\"},224:function(e,t,n){switch(window.__osdThemeTag__){case\\"v7dark\\":return n(904);case\\"v7light\\":return n(782);case\\"v8dark\\":return n(347);case\\"v8light\\":return n(431);case\\"v9dark\\":return n(974);case\\"v9light\\":return n(992)}},922:function(e,t,n){switch(window.__osdThemeTag__){case\\"v7dark\\":return n(346);case\\"v7light\\":return n(256);case\\"v8dark\\":return n(265);case\\"v8light\\":return n(517);case\\"v9dark\\":return n(332);case\\"v9light\\":return n(894)}},473:function(e,t,n){\\"use strict\\";n.r(t),n.d(t,{barLibFn:()=>o,fooLibFn:()=>r.fooLibFn}),n(922),n(224);var r=n(148);function o(){return\\"bar\\"}},148:function(e){e.exports=__osdBundles__.get(\\"plugin/foo/public\\")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=(()=>{if(\\"object\\"==typeof globalThis)return globalThis;try{return this||Function(\\"return this\\")()}catch(e){if(\\"object\\"==typeof window)return window}})(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{\\"undefined\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\"Module\\"}),Object.defineProperty(e,\\"__esModule\\",{value:!0})},n.nc=void 0,n.rv=()=>\\"1.6.4\\",n.g.importScripts&&(r=n.g.location+\\"\\");var r,o=n.g.document;if(!r&&o&&(o.currentScript&&\\"SCRIPT\\"===o.currentScript.tagName.toUpperCase()&&(r=o.currentScript.src),!r)){var i=o.getElementsByTagName(\\"script\\");if(i.length)for(var a=i.length-1;a>-1&&(!r||!/^http(s?):/.test(r));)r=i[a--].src}if(!r)throw Error(\\"Automatic publicPath is not supported in this browser\\");n.p=r=r.replace(/^blob:/,\\"\\").replace(/#.*$/,\\"\\").replace(/\\\\?.*$/,\\"\\").replace(/\\\\/[^\\\\/]+$/,\\"/\\"),n.ruid=\\"bundler=rspack@1.6.4\\",(()=>{\\"use strict\\";n(21),__osdBundles__.define(\\"plugin/bar/public\\",()=>n(473))})()})();"`;

exports[`prepares assets for distribution: foo bundle 1`] = `"(()=>{var e,r,t,o={260:function(e,r,t){t.p=window.__osdPublicPath__.foo,t.nc=window.__webpack_nonce__||\\"\\"},510:function(e,r,t){\\"use strict\\";function o(){return\\"foo\\"}t.r(r),t.d(r,{getFoo:()=>i,ext:()=>n,fooLibFn:()=>o});let n=\\"TRUE\\";async function i(){return await t.e(\\"674\\").then(t.bind(t,217))}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var t=n[e]={exports:{}};return o[e](t,t.exports,i),t.exports}i.m=o,i.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return i.d(r,{a:r}),r},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((r,t)=>(i.f[t](e,r),r),[])),i.u=e=>\\"foo.chunk.\\"+e+\\".js\\",i.g=(()=>{if(\\"object\\"==typeof globalThis)return globalThis;try{return this||Function(\\"return this\\")()}catch(e){if(\\"object\\"==typeof window)return window}})(),i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),u={},i.l=function(e,r,t,o){if(u[e])return void u[e].push(r);if(void 0!==t)for(var n,a,c=document.getElementsByTagName(\\"script\\"),l=0;l<c.length;l++){var s=c[l];if(s.getAttribute(\\"src\\")==e){n=s;break}}n||(a=!0,(n=document.createElement(\\"script\\")).timeout=120,i.nc&&n.setAttribute(\\"nonce\\",i.nc),n.src=e),u[e]=[r];var d=function(r,t){n.onerror=n.onload=null,clearTimeout(f);var o=u[e];if(delete u[e],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach(function(e){return e(t)}),r)return r(t)},f=setTimeout(d.bind(null,void 0,{type:\\"timeout\\",target:n}),12e4);n.onerror=d.bind(null,n.onerror),n.onload=d.bind(null,n.onload),a&&document.head.appendChild(n)},i.r=e=>{\\"undefined\\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\"Module\\"}),Object.defineProperty(e,\\"__esModule\\",{value:!0})},i.nc=void 0,i.rv=()=>\\"1.6.4\\",i.g.importScripts&&(a=i.g.location+\\"\\");var u,a,c=i.g.document;if(!a&&c&&(c.currentScript&&\\"SCRIPT\\"===c.currentScript.tagName.toUpperCase()&&(a=c.currentScript.src),!a)){var l=c.getElementsByTagName(\\"script\\");if(l.length)for(var s=l.length-1;s>-1&&(!a||!/^http(s?):/.test(a));)a=l[s--].src}if(!a)throw Error(\\"Automatic publicPath is not supported in this browser\\");i.p=a=a.replace(/^blob:/,\\"\\").replace(/#.*$/,\\"\\").replace(/\\\\?.*$/,\\"\\").replace(/\\\\/[^\\\\/]+$/,\\"/\\"),e={246:0},i.f.j=function(r,t){var o=i.o(e,r)?e[r]:void 0;if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((t,n)=>o=e[r]=[t,n]);t.push(o[2]=n);var u=i.p+i.u(r),a=Error();i.l(u,function(t){if(i.o(e,r)&&(0!==(o=e[r])&&(e[r]=void 0),o)){var n=t&&(\\"load\\"===t.type?\\"missing\\":t.type),u=t&&t.target&&t.target.src;a.message=\\"Loading chunk \\"+r+\\" failed.\\\\n(\\"+n+\\": \\"+u+\\")\\",a.name=\\"ChunkLoadError\\",a.type=n,a.request=u,o[1](a)}},\\"chunk-\\"+r,r)}},r=(r,t)=>{var o,n,u=t[0],a=t[1],c=t[2],l=0;if(u.some(r=>0!==e[r])){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);c&&c(i)}for(r&&r(t);l<u.length;l++)n=u[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},(t=self.foo_bundle_jsonpfunction=self.foo_bundle_jsonpfunction||[]).forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t)),i.ruid=\\"bundler=rspack@1.6.4\\",(()=>{\\"use strict\\";i(260),__osdBundles__.define(\\"plugin/foo/public\\",()=>i(510))})()})();"`;
