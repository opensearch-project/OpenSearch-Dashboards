// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`builds expected bundles, saves bundle counts to metadata: OptimizerConfig 1`] = `
OptimizerConfig {
  "bundles": Array [
    Bundle {
      "banner": undefined,
      "cache": BundleCache {
        "path": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/target/public/.osd-optimizer-cache,
        "state": undefined,
      },
      "contextDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar,
      "id": "bar",
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/opensearch_dashboards.json,
      "outputDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/target/public,
      "publicDirNames": Array [
        "public",
      ],
      "sourceRoot": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo,
      "type": "plugin",
    },
    Bundle {
      "banner": undefined,
      "cache": BundleCache {
        "path": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/target/public/.osd-optimizer-cache,
        "state": undefined,
      },
      "contextDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo,
      "id": "foo",
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/opensearch_dashboards.json,
      "outputDir": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/target/public,
      "publicDirNames": Array [
        "public",
      ],
      "sourceRoot": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo,
      "type": "plugin",
    },
  ],
  "cache": true,
  "dist": false,
  "inspectWorkers": false,
  "limits": "<Limits>",
  "maxWorkerCount": 1,
  "plugins": Array [
    Object {
      "directory": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar,
      "extraPublicDirs": Array [],
      "id": "bar",
      "isUiPlugin": true,
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/bar/opensearch_dashboards.json,
    },
    Object {
      "directory": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo,
      "extraPublicDirs": Array [],
      "id": "foo",
      "isUiPlugin": true,
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/foo/opensearch_dashboards.json,
    },
    Object {
      "directory": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/nested/baz,
      "extraPublicDirs": Array [],
      "id": "baz",
      "isUiPlugin": false,
      "manifestPath": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo/plugins/nested/baz/opensearch_dashboards.json,
    },
  ],
  "profileWebpack": false,
  "repoRoot": <absolute path>/packages/osd-optimizer/src/__fixtures__/__tmp__/mock_repo,
  "themeTags": Array [
    "v7dark",
    "v7light",
    "v8dark",
    "v8light",
    "v9dark",
    "v9light",
  ],
  "watch": false,
}
`;

exports[`prepares assets for distribution: bar bundle 1`] = `"(()=>{var e={92(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},806(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:10}\\\\n\\",\\"\\"]);let i=o},26(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},524(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:11}\\\\n\\",\\"\\"]);let i=o},167(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},309(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:12}\\\\n\\",\\"\\"]);let i=o},483(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},913(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:13}\\\\n\\",\\"\\"]);let i=o},274(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},816(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:14}\\\\n\\",\\"\\"]);let i=o},52(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"body{color:green}\\\\n\\",\\"\\"]);let i=o},426(e,t,r){\\"use strict\\";r.r(t),r.d(t,{default:()=>i});var n=r(445),o=r.n(n)()(function(e){return e[1]});o.push([e.id,\\"p{background-color:#639}body{width:15}\\\\n\\",\\"\\"]);let i=o},445(e){\\"use strict\\";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=e(t);return t[2]?\\"@media \\".concat(t[2],\\" {\\").concat(r,\\"}\\"):r}).join(\\"\\")},t.i=function(e,r,n){\\"string\\"==typeof e&&(e=[[null,e,\\"\\"]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&o[u[0]]||(r&&(u[2]?u[2]=\\"\\".concat(r,\\" and \\").concat(u[2]):u[2]=r),t.push(u))}},t}},904(e,t,r){var n=r(85),o=r(92);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},346(e,t,r){var n=r(85),o=r(806);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},782(e,t,r){var n=r(85),o=r(26);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},256(e,t,r){var n=r(85),o=r(524);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},347(e,t,r){var n=r(85),o=r(167);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},265(e,t,r){var n=r(85),o=r(309);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},431(e,t,r){var n=r(85),o=r(483);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},517(e,t,r){var n=r(85),o=r(913);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},974(e,t,r){var n=r(85),o=r(274);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},332(e,t,r){var n=r(85),o=r(816);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},992(e,t,r){var n=r(85),o=r(52);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},894(e,t,r){var n=r(85),o=r(426);\\"string\\"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.id,o,\\"\\"]]);var i={};i.insert=\\"head\\",i.singleton=!1,n(o,i),e.exports=o.locals||{}},85(e,t,r){\\"use strict\\";var n,o,i,a=(o={},function(e){if(void 0===o[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}o[e]=t}return o[e]}),s=[];function u(e){for(var t=-1,r=0;r<s.length;r++)if(s[r].identifier===e){t=r;break}return t}function d(e,t){for(var r={},n=[],o=0;o<e.length;o++){var i=e[o],a=t.base?i[0]+t.base:i[0],d=r[a]||0,c=\\"\\".concat(a,\\" \\").concat(d);r[a]=d+1;var g=u(c),b={css:i[1],media:i[2],sourceMap:i[3]};-1!==g?(s[g].references++,s[g].updater(b)):s.push({identifier:c,updater:function(e,t){if(t.singleton){var r,n,o,i=h++;n=f.bind(null,r=v||(v=l(t)),i,!1),o=f.bind(null,r,i,!0)}else n=p.bind(null,r=l(t),t),o=function(){var e;null===(e=r).parentNode||e.parentNode.removeChild(e)};return n(e),function(t){t?(t.css!==e.css||t.media!==e.media||t.sourceMap!==e.sourceMap)&&n(e=t):o()}}(b,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement(\\"style\\"),n=e.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),\\"function\\"==typeof e.insert)e.insert(t);else{var i=a(e.insert||\\"head\\");if(!i)throw Error(\\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\\");i.appendChild(t)}return t}var c=(i=[],function(e,t){return i[e]=t,i.filter(Boolean).join(\\"\\\\n\\")});function f(e,t,r,n){var o=r?\\"\\":n.media?\\"@media \\".concat(n.media,\\" {\\").concat(n.css,\\"}\\"):n.css;if(e.styleSheet)e.styleSheet.cssText=c(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function p(e,t,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?e.setAttribute(\\"media\\",o):e.removeAttribute(\\"media\\"),i&&\\"u\\">typeof btoa&&(n+=\\"\\\\n/*# sourceMappingURL=data:application/json;base64,\\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i)))),\\" */\\")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var v=null,h=0;e.exports=function(e,t){(t=t||{}).singleton||\\"boolean\\"==typeof t.singleton||(t.singleton=(void 0===n&&(n=!!(window&&document&&document.all&&!window.atob)),n));var r=d(e=e||[],t);return function(e){if(e=e||[],\\"[object Array]\\"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var o=u(r[n]);s[o].references--}for(var i=d(e,t),a=0;a<r.length;a++){var l=u(r[a]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}r=i}}}},21(e,t,r){r.p=window.__osdPublicPath__.bar,r.nc=window.__webpack_nonce__||\\"\\"},224(e,t,r){switch(window.__osdThemeTag__){case\\"v7dark\\":return r(904);case\\"v7light\\":return r(782);case\\"v8dark\\":return r(347);case\\"v8light\\":return r(431);case\\"v9dark\\":return r(974);case\\"v9light\\":return r(992)}},922(e,t,r){switch(window.__osdThemeTag__){case\\"v7dark\\":return r(346);case\\"v7light\\":return r(256);case\\"v8dark\\":return r(265);case\\"v8light\\":return r(517);case\\"v9dark\\":return r(332);case\\"v9light\\":return r(894)}},473(e,t,r){\\"use strict\\";r.r(t),r.d(t,{barLibFn:()=>o,fooLibFn:()=>n.fooLibFn}),r(922),r(224);var n=r(148);function o(){return\\"bar\\"}},148(e){e.exports=__osdBundles__.get(\\"plugin/foo/public\\")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=(()=>{if(\\"object\\"==typeof globalThis)return globalThis;try{return this||Function(\\"return this\\")()}catch(e){if(\\"object\\"==typeof window)return window}})(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{\\"u\\">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\"Module\\"}),Object.defineProperty(e,\\"__esModule\\",{value:!0})},r.nc=void 0,r.rv=()=>\\"1.7.1\\",r.g.importScripts&&(n=r.g.location+\\"\\");var n,o=r.g.document;if(!n&&o&&(o.currentScript&&\\"SCRIPT\\"===o.currentScript.tagName.toUpperCase()&&(n=o.currentScript.src),!n)){var i=o.getElementsByTagName(\\"script\\");if(i.length)for(var a=i.length-1;a>-1&&(!n||!/^http(s?):/.test(n));)n=i[a--].src}if(!n)throw Error(\\"Automatic publicPath is not supported in this browser\\");r.p=n=n.replace(/^blob:/,\\"\\").replace(/#.*$/,\\"\\").replace(/\\\\?.*$/,\\"\\").replace(/\\\\/[^\\\\/]+$/,\\"/\\"),r.ruid=\\"bundler=rspack@1.7.1\\",(()=>{\\"use strict\\";r(21),__osdBundles__.define(\\"plugin/bar/public\\",()=>r(473))})()})();"`;

exports[`prepares assets for distribution: foo bundle 1`] = `"(()=>{var e,r,t,o={260(e,r,t){t.p=window.__osdPublicPath__.foo,t.nc=window.__webpack_nonce__||\\"\\"},900(e,r,t){\\"use strict\\";function o(e,r,t,o,n,i,u){try{var a=e[i](u),c=a.value}catch(e){t(e);return}a.done?r(c):Promise.resolve(c).then(o,n)}t.r(r),t.d(r,{getFoo:()=>a,ext:()=>u,fooLibFn:()=>i});let n=__osdSharedDeps__.TsLib;function i(){return\\"foo\\"}var u=\\"TRUE\\";function a(){var e;return(e=function(){return(0,n.__generator)(this,function(e){switch(e.label){case 0:return[4,t.e(\\"674\\").then(t.bind(t,217))];case 1:return[2,e.sent()]}})},function(){var r=this,t=arguments;return new Promise(function(n,i){var u=e.apply(r,t);function a(e){o(u,n,i,a,c,\\"next\\",e)}function c(e){o(u,n,i,a,c,\\"throw\\",e)}a(void 0)})})()}}},n={};function i(e){var r=n[e];if(void 0!==r)return r.exports;var t=n[e]={exports:{}};return o[e](t,t.exports,i),t.exports}i.m=o,i.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return i.d(r,{a:r}),r},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((r,t)=>(i.f[t](e,r),r),[])),i.u=e=>\\"foo.chunk.\\"+e+\\".js\\",i.g=(()=>{if(\\"object\\"==typeof globalThis)return globalThis;try{return this||Function(\\"return this\\")()}catch(e){if(\\"object\\"==typeof window)return window}})(),i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),u={},i.l=function(e,r,t,o){if(u[e])return void u[e].push(r);if(void 0!==t)for(var n,a,c=document.getElementsByTagName(\\"script\\"),l=0;l<c.length;l++){var s=c[l];if(s.getAttribute(\\"src\\")==e){n=s;break}}n||(a=!0,(n=document.createElement(\\"script\\")).timeout=120,i.nc&&n.setAttribute(\\"nonce\\",i.nc),n.src=e),u[e]=[r];var d=function(r,t){n.onerror=n.onload=null,clearTimeout(f);var o=u[e];if(delete u[e],n.parentNode&&n.parentNode.removeChild(n),o&&o.forEach(function(e){return e(t)}),r)return r(t)},f=setTimeout(d.bind(null,void 0,{type:\\"timeout\\",target:n}),12e4);n.onerror=d.bind(null,n.onerror),n.onload=d.bind(null,n.onload),a&&document.head.appendChild(n)},i.r=e=>{\\"u\\">typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\\"Module\\"}),Object.defineProperty(e,\\"__esModule\\",{value:!0})},i.nc=void 0,i.rv=()=>\\"1.7.1\\",i.g.importScripts&&(a=i.g.location+\\"\\");var u,a,c=i.g.document;if(!a&&c&&(c.currentScript&&\\"SCRIPT\\"===c.currentScript.tagName.toUpperCase()&&(a=c.currentScript.src),!a)){var l=c.getElementsByTagName(\\"script\\");if(l.length)for(var s=l.length-1;s>-1&&(!a||!/^http(s?):/.test(a));)a=l[s--].src}if(!a)throw Error(\\"Automatic publicPath is not supported in this browser\\");i.p=a=a.replace(/^blob:/,\\"\\").replace(/#.*$/,\\"\\").replace(/\\\\?.*$/,\\"\\").replace(/\\\\/[^\\\\/]+$/,\\"/\\"),e={246:0},i.f.j=function(r,t){var o=i.o(e,r)?e[r]:void 0;if(0!==o)if(o)t.push(o[2]);else{var n=new Promise((t,n)=>o=e[r]=[t,n]);t.push(o[2]=n);var u=i.p+i.u(r),a=Error();i.l(u,function(t){if(i.o(e,r)&&(0!==(o=e[r])&&(e[r]=void 0),o)){var n=t&&(\\"load\\"===t.type?\\"missing\\":t.type),u=t&&t.target&&t.target.src;a.message=\\"Loading chunk \\"+r+\\" failed.\\\\n(\\"+n+\\": \\"+u+\\")\\",a.name=\\"ChunkLoadError\\",a.type=n,a.request=u,o[1](a)}},\\"chunk-\\"+r,r)}},r=(r,t)=>{var o,n,u=t[0],a=t[1],c=t[2],l=0;if(u.some(r=>0!==e[r])){for(o in a)i.o(a,o)&&(i.m[o]=a[o]);c&&c(i)}for(r&&r(t);l<u.length;l++)n=u[l],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0},(t=self.foo_bundle_jsonpfunction=self.foo_bundle_jsonpfunction||[]).forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t)),i.ruid=\\"bundler=rspack@1.7.1\\",(()=>{\\"use strict\\";i(260),__osdBundles__.define(\\"plugin/foo/public\\",()=>i(900))})()})();"`;
